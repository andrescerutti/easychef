<h2 class="text-center">Todas las ordenes</h2>
<div class="d-flex">
  <div class="col-6">
    <ul class="list-inline tabs-underlined">
      <ul class="nav nav-tabs justify-content-center" id="myTab" role="tablist">
        <li class="nav-item">
          <a class="nav-link active" id="pending-tab" data-toggle="tab" href="#pending" role="tab" aria-controls="Pendientes" aria-selected="true">Pendientes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="on_transit-tab" data-toggle="tab" href="#on_transit" role="tab" aria-controls="En transito" aria-selected="false">En transito</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="delivered-tab" data-toggle="tab" href="#delivered" role="tab" aria-controls="Entregadas" aria-selected="false">Entregadas</a>
        </li>
      </ul>
<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="pending" role="tabpanel" aria-labelledby="pending-tab">
    <% if !@orders.pending.empty? %>
      <% @orders.pending.each do |order| %>
        <% if order.status == 'pending' %>
          <div class="card mb-3" style="width: 100%;">
            <% status_color = { pending: '#fd1015', on_transit: '#eeff00', delivered: '#4dc433' } %>
            <div class="card-header" style="background-color: <%= status_color[order.status.to_sym] %>;">
              <h4> Orden <%= order.id %> </h4>
            </div>
            <ul class="list-group list-group-flush">
              <li class="list-group-item">Estado: <%= order.state %></li>
              <li class="list-group-item">Direccion: <%= order.address.address %></li>
              <li class="list-group-item">Usuario: <%= order.user.first_name %> <%= order.user.last_name %> (<%= order.user_id %>)</li>
              <li class="list-group-item">Restaurant: <%= order.kit.restaurant.name %></li>
              <li class="list-group-item">Kit: <%= order.kit.name %></li>
            </ul>
          </div>
        <% end %>
      <% end %>
    <% else %>
      <p>No hay ordenes pendientes</p>
    <% end %>

  </div>


  <div class="tab-pane fade" id="on_transit" role="tabpanel" aria-labelledby="on_transit-tab">
    <% if !@orders.on_transit.empty? %>
      <% @orders.on_transit.each do |order| %>
          <div class="card mb-3" style="width: 100%;">
            <% status_color = { pending: '#fd1015', on_transit: '#eeff00', delivered: '#4dc433' } %>
            <div class="card-header" style="background-color: <%= status_color[order.status.to_sym] %>;">
              <h4> Orden <%= order.id %> </h4>
            </div>
            <ul class="list-group list-group-flush">
              <li class="list-group-item">Estado: <%= order.state %></li>
              <li class="list-group-item">Direccion: <%= order.address.address %></li>
              <li class="list-group-item">Usuario: <%= order.user.first_name %> <%= order.user.last_name %> (<%= order.user_id %>)</li>
              <li class="list-group-item">Restaurant: <%= order.kit.restaurant.name %></li>
              <li class="list-group-item">Kit: <%= order.kit.name %></li>
            </ul>
          </div>
      <% end %>
    <% else %>
      <p>No hay ordenes en transito</p>
    <% end %>


  </div>

  <div class="tab-pane fade" id="delivered" role="tabpanel" aria-labelledby="delivered-tab">
    <% if !@orders.delivered.empty? %>
      <% @orders.each do |order| %>
        <div class="d-flex">
          <div>
             <h5><%= order.user.first_name %> <%= order.user.last_name %></h5>
             <p><%= order.user.address.address %></p>
             <p><%= order.kit.name %></p>
             <p><%= order.kit.restaurant.name %></p>
          </div>
          <div>
            <%= simple_form_for order do |f| %>
              <%= f.input :delivery_provider, collection: PROVIDER, prompt: "Proveedor de envÃ­o" %>
              <%= f.input :reference_number %>
              <%= f.button :submit %>
            <% end %>
          </div>
        </div>
      <% end %>
    <% else %>
      <p>No hay ordenes entregadas</p>
    <% end %>


  </div>
</div>















    </div>
  <div class="col-6">
    <div
      id="map"
      class="position-sticky"
      style="width: 100%;
      height: 100vh; top: 0;"
      data-markers="<%= @markers.to_json %>"
      data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
      </div>
  </div>



</div>




